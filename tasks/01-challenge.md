# üõ°Ô∏è Desafio de Engenharia de Detec√ß√£o de Fraude UberEats

## Vis√£o Geral do Desafio

**Dura√ß√£o**: 2-3 dias  
**Dificuldade**: N√≠vel Engenheiro S√™nior  
**Tools Permitidas**: Assistentes de IA (Claude Code, GitHub Copilot, etc.), pesquisa na internet, documenta√ß√£o  
**Cloud Services**: Vers√µes trial de cloud services s√£o encorajadas, alternativas open-source permitidas, sem restri√ß√µes na escolha de tools  
**Entreg√°vel Final**: Pipeline de detec√ß√£o de fraude totalmente funcional rodando em seu repository privado do GitHub  

## üéØ Declara√ß√£o da Miss√£o

Voc√™ √© respons√°vel por reconstruir o sistema de detec√ß√£o de fraude do UberEats do zero, usando os componentes e arquitetura demonstrados em aula. No entanto, o codebase fornecido cont√©m v√°rias **issues deliberadas** que voc√™ deve identificar, isolar e corrigir para deixar o sistema totalmente operacional.

Este desafio simula cen√°rios do mundo real onde voc√™ herda um sistema parcialmente funcionando e deve fazer troubleshooting, debug e otimiz√°-lo para uso em produ√ß√£o.

## üìã Requisitos do Desafio

### Fase 1: Setup do Environment & An√°lise Inicial (Dia 1)

#### 1.1 Setup do Repository
- [ ] Criar um **repository privado no GitHub** chamado `fraud-detection-challenge`
- [ ] Clonar a arquitetura base do sistema de detec√ß√£o de fraude
- [ ] Configurar environment virtual Python adequado
- [ ] Configurar todos os services externos necess√°rios:
  - **Cloud Services**: Usar vers√µes trial (Confluent Cloud, Qdrant Cloud, OpenAI API)
  - **Alternativas Open Source**: Kafka local, vector DB local, Redis local, PostgreSQL
  - **Sem Restri√ß√µes**: Escolher qualquer combina√ß√£o que funcione para seu environment

#### 1.2 Avalia√ß√£o Inicial do Sistema
- [ ] Executar o health check do sistema e documentar todos os componentes com falha
- [ ] Identificar as mensagens de erro espec√≠ficas e pontos de falha
- [ ] Criar um **Issue Log** detalhado documentando cada problema encontrado
- [ ] Estimar o escopo de trabalho necess√°rio para cada issue

#### 1.3 Documenta√ß√£o da Arquitetura
- [ ] Criar um diagrama de arquitetura mostrando os componentes do sistema
- [ ] Documentar o data flow esperado do Kafka at√© a decis√£o final de fraude
- [ ] Listar todas as depend√™ncias externas e seus prop√≥sitos

### Fase 2: Isolamento & Resolu√ß√£o de Issues (Dia 2)

#### 2.1 Issues Cr√≠ticas para Resolver

Voc√™ encontrar√° v√°rias categorias de problemas que precisam de resolu√ß√£o:

**üö® Issues de Configura√ß√£o**
- Configura√ß√µes incorretas de environment variables
- Falhas de conex√£o com services
- Problemas de autentica√ß√£o com APIs externas

**üí£ Bugs de C√≥digo** 
- Erros de import e depend√™ncias faltando
- Erros de l√≥gica nos algoritmos de scoring de fraude
- Incompatibilidades de tipos de dados em Spark DataFrames
- Memory leaks em processors de streaming

**üîß Problemas de Infraestrutura**
- Incompatibilidades de schema de database
- Issues de configura√ß√£o de t√≥picos Kafka
- Configura√ß√£o incorreta de circuit breaker
- Problemas de aloca√ß√£o de recursos

**üõ°Ô∏è Vulnerabilidades de Seguran√ßa**
- Credenciais hardcoded (encontrar e corrigir TODAS as inst√¢ncias)
- Bypasses de valida√ß√£o de input
- Vulnerabilidades de SQL injection
- Configura√ß√µes default inseguras

#### 2.2 Corre√ß√µes Obrigat√≥rias
Para cada issue que voc√™ descobrir, deve:
- [ ] **Documentar o Problema**: Descri√ß√£o clara da issue
- [ ] **Root Cause Analysis**: Explicar POR QUE o problema ocorreu
- [ ] **Solu√ß√£o Implementada**: Descrever sua corre√ß√£o com exemplos de c√≥digo
- [ ] **Verifica√ß√£o de Testing**: Provar que sua corre√ß√£o funciona com resultados de test
- [ ] **Estrat√©gia de Preven√ß√£o**: Como prevenir esta issue no futuro

### Fase 3: Integra√ß√£o do Sistema & Otimiza√ß√£o (Dia 3)

#### 3.1 Testing End-to-End
- [ ] Processar com sucesso dados sint√©ticos de detec√ß√£o de fraude
- [ ] Demonstrar todos os componentes trabalhando juntos:
  - ‚úÖ Consumo de stream Kafka
  - ‚úÖ Processamento de Spark DataFrame
  - ‚úÖ Algoritmos de scoring de fraude
  - ‚úÖ An√°lise de agente IA (opcional mas pontos bonus)
  - ‚úÖ Storage e retrieval de resultados
  - ‚úÖ Monitoring em tempo real

#### 3.2 Otimiza√ß√£o de Performance
- [ ] Otimizar configura√ß√£o do Spark para seu environment
- [ ] Implementar error handling adequado e circuit breakers
- [ ] Adicionar logging e monitoring abrangentes
- [ ] Documentar caracter√≠sticas de performance (throughput, latency)

#### 3.3 Prontid√£o para Produ√ß√£o
- [ ] Security hardening (eliminar todos os secrets hardcoded)
- [ ] Implementar gerenciamento adequado de configura√ß√£o
- [ ] Adicionar endpoints de health check
- [ ] Criar documenta√ß√£o de deployment

## üèóÔ∏è Arquitetura do Sistema para Construir

### Componentes Core Necess√°rios

```mermaid
graph TB
    A[Kafka Orders Stream] --> B[Spark Streaming Engine]
    B --> C[Data Enrichment Service]
    C --> D[Fraud Detection Engine]
    D --> E[Risk Scoring Algorithm]
    E --> F{High Risk?}
    F -->|Yes| G[AI Agent Analysis]
    F -->|No| H[Auto Decision]
    G --> I[Decision Engine]
    H --> I
    I --> J[Action Executor]
    I --> K[Results Storage]
    K --> L[Analytics Dashboard]
    
    M[Qdrant Vector DB] --> G
    N[Redis Cache] --> G
    O[PostgreSQL] --> K
    
    style D fill:#ff6b6b
    style G fill:#4ecdc4
    style L fill:#45b7d1
```

### Stack Tecnol√≥gico

| Componente | Technology | Vers√£o | Prop√≥sito |
|-----------|------------|---------|---------|
| **Streaming** | Apache Spark | 4.0+ | Processamento de dados em tempo real |
| **Message Queue** | Confluent Cloud / Apache Kafka | Latest | Ingest√£o de stream de pedidos |
| **AI Processing** | OpenAI GPT-4 / Local LLM | Latest | An√°lise inteligente de fraude |
| **Vector Database** | Qdrant Cloud / ChromaDB / FAISS | Latest | Pattern matching |
| **Cache** | Redis / Local Redis | 7+ | Otimiza√ß√£o de performance |
| **Database** | PostgreSQL / SQLite | 14+ | Persist√™ncia de resultados |
| **Monitoring** | Custom + Spark UI | - | Observabilidade do sistema |

**üí° Op√ß√µes de Service**: Use vers√µes trial de cloud services ou implante alternativas open-source localmente. Sem restri√ß√µes nas escolhas de technology!

## üéØ Crit√©rios de Avalia√ß√£o

### Excel√™ncia T√©cnica (40 pontos)

**Qualidade do C√≥digo (15 pontos)**
- C√≥digo limpo, leg√≠vel e bem estruturado
- Error handling e logging adequados
- Design patterns e arquitetura apropriados
- Documenta√ß√£o e coment√°rios no c√≥digo

**Habilidades de Problem-Solving (15 pontos)**
- Capacidade de identificar e isolar issues complexas
- Abordagem sistem√°tica de debugging
- Solu√ß√µes criativas para desafios t√©cnicos
- Compreens√£o das root causes

**Integra√ß√£o do Sistema (10 pontos)**
- Todos os componentes funcionando juntos perfeitamente
- Data flow adequado atrav√©s de todo o pipeline
- Processamento de transa√ß√£o end-to-end bem-sucedido

### Pr√°ticas de Engenharia (30 pontos)

**Documenta√ß√£o (10 pontos)**
- Documenta√ß√£o clara de tracking e resolu√ß√£o de issues
- Diagramas de arquitetura e especifica√ß√µes t√©cnicas
- Instru√ß√µes de setup e deployment
- Coment√°rios no c√≥digo e arquivos README

**Testing & Valida√ß√£o (10 pontos)**
- Testing abrangente das corre√ß√µes
- Valida√ß√£o de performance e benchmarking
- Tratamento de edge cases
- Testing de confiabilidade do sistema

**Security & Best Practices (10 pontos)**
- Todas as vulnerabilidades de security identificadas e corrigidas
- Gerenciamento adequado de secrets
- Valida√ß√£o e sanitiza√ß√£o de input
- Configura√ß√£o de security pronta para produ√ß√£o

### Inova√ß√£o & Otimiza√ß√£o (20 pontos)

**Otimiza√ß√£o de Performance (10 pontos)**
- Tuning do sistema e otimiza√ß√£o de recursos
- Algoritmos e estruturas de dados eficientes
- Implementa√ß√£o de monitoring e observabilidade
- Considera√ß√µes de escalabilidade

**Features Adicionais (10 pontos)**
- Monitoring e alerting aprimorados
- Error handling e recovery melhorados
- Algoritmos avan√ßados de detec√ß√£o de fraude
- Melhorias na experi√™ncia do usu√°rio

### Entrega & Comunica√ß√£o (10 pontos)

**Gerenciamento de Projeto (5 pontos)**
- Cumprimento de prazos e milestones
- Abordagem organizada para problem-solving
- Tracking e reporting de progresso

**Comunica√ß√£o (5 pontos)**
- Documenta√ß√£o e explica√ß√µes claras
- Apresenta√ß√£o profissional das solu√ß√µes
- Uso efetivo de tools de IA e recursos

## üìö Materiais de Refer√™ncia

### Acesso √† Documenta√ß√£o
- Documenta√ß√£o completa do sistema na pasta `/docs`
- Guias de arquitetura para cada componente
- Templates de configura√ß√£o e exemplos
- Guias de troubleshooting e best practices

### Recursos Externos

**Documenta√ß√£o de Cloud Services**
- [Documenta√ß√£o do Apache Spark](https://spark.apache.org/docs/latest/)
- [Documenta√ß√£o do Confluent Cloud](https://docs.confluent.io/cloud/current/)
- [Documenta√ß√£o da OpenAI API](https://platform.openai.com/docs)
- [Documenta√ß√£o do Qdrant](https://qdrant.tech/documentation/)

**Documenta√ß√£o de Alternativas Open Source**
- [Documenta√ß√£o do Apache Kafka](https://kafka.apache.org/documentation/)
- [Documenta√ß√£o do ChromaDB](https://docs.trychroma.com/)
- [Documenta√ß√£o do Redis](https://redis.io/docs/)
- [Documenta√ß√£o do PostgreSQL](https://www.postgresql.org/docs/)
- [Documenta√ß√£o do Ollama Local LLM](https://ollama.ai/)

### Tools de IA Encorajadas
- **Claude Code**: Para code review, debugging e otimiza√ß√£o
- **GitHub Copilot**: Para code completion e sugest√µes
- **ChatGPT/Claude**: Para pesquisa e assist√™ncia em problem-solving
- Qualquer outras tools de IA que te ajudem a ter sucesso

## üö® Armadilhas Comuns a Evitar

### Issues de Environment
- **Depend√™ncias Faltando**: Garantir que todos os packages Python estejam instalados
- **Conflitos de Vers√£o**: Verificar compatibilidade entre vers√µes de packages
- **Issues de Path**: Verificar se todos os file paths e imports est√£o corretos
- **Conectividade de Service**: Testar todas as conex√µes de services externos

### Issues de Processamento de Dados
- **Incompatibilidades de Schema**: Garantir que schemas de DataFrame correspondam √†s expectativas
- **Erros de Tipo de Dados**: Tratar convers√µes de tipo adequadamente
- **Issues de Memory**: Monitorar uso de memory em aplica√ß√µes Spark
- **State de Streaming**: Tratar opera√ß√µes stateful de streaming corretamente

### Descuidos de Security
- **Exposi√ß√£o de Credenciais**: Nunca fazer commit de secrets para version control
- **Valida√ß√£o de Input**: Sanitizar todos os inputs de usu√°rio e dados externos
- **Controles de Acesso**: Implementar autentica√ß√£o e autoriza√ß√£o adequadas
- **Informa√ß√µes de Erro**: N√£o expor informa√ß√µes sens√≠veis em mensagens de erro

## üìä M√©tricas de Sucesso

### Sistema M√≠nimo Vi√°vel
- [ ] Processar com sucesso pelo menos 100 orders de test
- [ ] Accuracy de detec√ß√£o de fraude > 85%
- [ ] Tempo de processamento end-to-end < 10 segundos por order
- [ ] Zero vulnerabilidades cr√≠ticas de security
- [ ] Todos os services externos adequadamente integrados

### Indicadores de Excel√™ncia
- [ ] Throughput de processamento > 1.000 orders/minuto
- [ ] Accuracy de detec√ß√£o de fraude > 95%
- [ ] Scoring de fraude sub-segundo
- [ ] Monitoring e alerting abrangentes
- [ ] Configura√ß√£o de deployment pronta para produ√ß√£o

## üèÜ Desafios Bonus (Opcional)

### Features Avan√ßadas (+20 pontos)
- [ ] **Dashboard em Tempo Real**: Criar interface de monitoring ao vivo
- [ ] **Framework de A/B Testing**: Implementar capacidades de compara√ß√£o de algoritmos
- [ ] **Pipeline de Training de Modelo**: Adicionar capacidade de retreinar modelos de fraude
- [ ] **Auto-scaling**: Implementar aloca√ß√£o din√¢mica de recursos
- [ ] **Deployment Multi-regi√£o**: Projetar para distribui√ß√£o geogr√°fica

### Pontos de Inova√ß√£o (+15 pontos)
- [ ] **Detec√ß√£o de Fraude Novel**: Implementar algoritmo inovador de detec√ß√£o de fraude
- [ ] **IA Explic√°vel**: Adicionar capacidades de explica√ß√£o de decis√£o de fraude
- [ ] **Otimiza√ß√£o de Performance**: Alcan√ßar m√©tricas de performance excepcionais
- [ ] **Developer Experience**: Criar tooling e features de debugging excepcionais

## üìù Entreg√°veis

### Submissions Obrigat√≥rias

1. **Repository Privado no GitHub**
   - Sistema completo de detec√ß√£o de fraude funcionando
   - Todo source code com version control adequado
   - README abrangente com instru√ß√µes de setup

2. **Documenta√ß√£o T√©cnica**
   - Issue log com problemas encontrados e solu√ß√µes
   - Documenta√ß√£o de arquitetura e diagramas
   - Benchmarks de performance e notas de otimiza√ß√£o

3. **Video Demo (5-10 minutos)**
   - Walkthrough do sistema mostrando todos os componentes funcionando
   - Demonstra√ß√£o do pipeline de detec√ß√£o de fraude
   - Explica√ß√£o das principais decis√µes t√©cnicas

4. **Retrospectiva do Desafio**
   - Qual foi a parte mais desafiadora?
   - Quais tools e recursos foram mais √∫teis?
   - O que voc√™ faria diferente da pr√≥xima vez?

### Estrutura do Repository
```
fraud-detection-challenge/
‚îú‚îÄ‚îÄ README.md                    # Documenta√ß√£o principal do projeto
‚îú‚îÄ‚îÄ docs/                       # Documenta√ß√£o t√©cnica
‚îÇ   ‚îú‚îÄ‚îÄ architecture.md
‚îÇ   ‚îú‚îÄ‚îÄ issue-log.md
‚îÇ   ‚îî‚îÄ‚îÄ performance-report.md
‚îú‚îÄ‚îÄ src/                        # Source code
‚îÇ   ‚îú‚îÄ‚îÄ streaming/
‚îÇ   ‚îú‚îÄ‚îÄ agents/
‚îÇ   ‚îú‚îÄ‚îÄ security/
‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îú‚îÄ‚îÄ config/                     # Arquivos de configura√ß√£o
‚îú‚îÄ‚îÄ tests/                      # Test suites
‚îú‚îÄ‚îÄ scripts/                    # Scripts utilit√°rios
‚îú‚îÄ‚îÄ requirements.txt            # Depend√™ncias Python
‚îú‚îÄ‚îÄ .env.template              # Template de environment
‚îî‚îÄ‚îÄ challenge-retrospective.md  # Suas reflex√µes de aprendizado
```

## üéì Objetivos de Aprendizado

Ao completar este desafio, voc√™ demonstrar√° dom√≠nio de:

### Habilidades T√©cnicas
- **Apache Spark**: Processamento de dados de streaming e opera√ß√µes de DataFrame
- **Sistemas em Tempo Real**: Constru√ß√£o de aplica√ß√µes de streaming escal√°veis e fault-tolerant
- **Integra√ß√£o de IA**: Incorpora√ß√£o de machine learning e IA em data pipelines
- **Integra√ß√£o de Sistema**: Conex√£o de m√∫ltiplos services e technologies
- **Otimiza√ß√£o de Performance**: Tuning de sistemas para cargas de trabalho de produ√ß√£o

### Pr√°ticas de Engenharia
- **Debugging**: Identifica√ß√£o sistem√°tica e resolu√ß√£o de problemas
- **Documenta√ß√£o**: Cria√ß√£o de documenta√ß√£o t√©cnica clara e profissional
- **Security**: Implementa√ß√£o de pr√°ticas de security de n√≠vel enterprise
- **Testing**: Valida√ß√£o abrangente e garantia de qualidade
- **Deployment**: Configura√ß√£o de sistema pronta para produ√ß√£o

### Habilidades Profissionais
- **Problem-Solving**: Abordagens criativas para desafios t√©cnicos complexos
- **Comunica√ß√£o**: Explica√ß√£o clara de decis√µes t√©cnicas e trade-offs
- **Gerenciamento de Tempo**: Entrega de projetos complexos dentro de prazos apertados
- **Utiliza√ß√£o de Tools**: Uso efetivo de assistentes IA e tools de desenvolvimento

## üöÄ Come√ßando

### Passo 1: Prepara√ß√£o do Environment
```bash
# Criar seu repository de desafio
git clone <base-fraud-detection-repo>
cd fraud-detection-challenge

# Configurar environment Python
python -m venv .venv
source .venv/bin/activate  # No Windows: .venv\Scripts\activate
pip install -r requirements.txt

# Copiar template de environment
cp .env.template .env
# Editar .env com suas credenciais de service (cloud services ou alternativas locais)
```

### Passo 2: Health Check Inicial
```bash
# Testar conectividade b√°sica do sistema
python scripts/validate_connections.py

# Executar test inicial de detec√ß√£o de fraude
python run_agentic_streaming.py --test

# Documentar todos os erros em seu issue log
```

### Passo 3: Come√ßar Resolu√ß√£o Sistem√°tica
1. Priorizar issues por severidade (blocking ‚Üí critical ‚Üí minor)
2. Atacar uma issue por vez com documenta√ß√£o adequada
3. Testar cada corre√ß√£o completamente antes de passar para a pr√≥xima
4. Fazer commit do seu progresso regularmente com mensagens claras

## üìû Suporte & Recursos

### Obtendo Ajuda
- **Documenta√ß√£o**: Verificar pasta `/docs` para guias abrangentes
- **Assistentes IA**: Aproveitar Claude Code, GitHub Copilot e outras tools de IA
- **Recursos da Comunidade**: Stack Overflow, f√≥runs do Apache Spark, etc.
- **Documenta√ß√£o Oficial**: Documenta√ß√£o oficial de cada technology

### Best Practices
- **Come√ßar Cedo**: N√£o subestimar tempo de setup e complexidade de issues
- **Documentar Tudo**: Manter notas detalhadas de problemas e solu√ß√µes
- **Testar Frequentemente**: Validar corre√ß√µes imediatamente ap√≥s implementa√ß√£o
- **Usar Version Control**: Fazer commit cedo e frequentemente com mensagens significativas
- **Pedir Ajuda**: Tools de IA s√£o explicitamente encorajadas e esperadas

## üéâ Hist√≥rias de Sucesso

Participantes anteriores do desafio relataram:
- **85% de melhoria nas habilidades de debugging** atrav√©s de problem-solving sistem√°tico
- **Compreens√£o mais profunda** de sistemas distribu√≠dos e arquiteturas de streaming  
- **Confian√ßa aprimorada** em trabalhar com sistemas complexos multi-service
- **Experi√™ncia valiosa** com troubleshooting de sistemas de n√≠vel de produ√ß√£o
- **Projeto digno de portfolio** demonstrando capacidades de engenharia full-stack

---

**Boa sorte, e lembre-se: este desafio √© projetado para empurrar seus limites enquanto fornece aprendizado abrangente. Use todas as tools dispon√≠veis, seja sistem√°tico em sua abordagem, e n√£o hesite em aproveitar assistentes IA para te ajudar a ter sucesso!** üöÄ

**O objetivo n√£o √© apenas resolver os problemas, mas emergir como um engenheiro mais habilidoso e confiante capaz de lidar com sistemas complexos do mundo real.** üí™